{"version":3,"file":"alpine-typewriter.js","sources":["../src/index.js","../builds/cdn.js"],"sourcesContent":["class Typewriter {\n    constructor(element, texts, waitTime, showCursor) {\n        this.element = element;\n        this.texts = texts || [];\n        this.current = 1;\n        this.currentText = '';\n        this.waitTime = waitTime || 2000;\n        this.showCursor = showCursor || false;\n        this.cursor = true;\n    }\n\n    async start() {\n        this.currentText = this.texts[0] || '';\n        this.element.innerHTML = this.prepareText(true);\n        this.increment();\n        while (true) {\n            await this.swap();\n        }\n    }\n\n    prepareText(cursor) {\n        return `${this.currentText}${\n            cursor ? this.getCursor() : ''\n        }${this.getPlaceholder()}`;\n    }\n\n    getCursor() {\n        return this.showCursor\n            ? '<span style=\"position:relative;\"><span style=\"position:absolute;top:0.05em;bottom:0.05em;border-left:0.05em solid currentColor;\"></span></span>'\n            : '';\n    }\n\n    getPlaceholder() {\n        return '<span style=\"position:relative;display:inline-block;height:1em;\"></span>';\n    }\n\n    async swap() {\n        await this.wait(this.waitTime);\n        await this.clear();\n        await this.type(this.nextText());\n    }\n\n    increment() {\n        this.current++;\n        if (this.current > this.texts.length) {\n            this.current = 1;\n        }\n    }\n\n    nextText() {\n        let text = this.texts[this.current - 1];\n        this.increment();\n        return text;\n    }\n\n    text() {\n        return this.currentText;\n    }\n\n    length() {\n        return this.text().length;\n    }\n\n    append(text) {\n        this.currentText += text;\n        this.element.innerHTML = this.prepareText(true);\n\n        return this.wait(100);\n    }\n\n    backspace() {\n        this.currentText = this.text().slice(0, -1);\n        this.element.innerHTML = this.prepareText(true);\n\n        return this.wait(100);\n    }\n\n    async clear() {\n        while (this.length()) {\n            await this.backspace();\n        }\n    }\n\n    async type(text) {\n        while (text.length) {\n            await this.append(text[0]);\n\n            text = text.substring(1);\n        }\n    }\n\n    async wait(milliseconds) {\n        this.cursor = true;\n        const interval = setInterval(() => {\n            this.cursor = !this.cursor;\n            if (this.cursor) {\n                this.element.innerHTML = this.prepareText(true);\n            } else {\n                this.element.innerHTML = this.prepareText(false);\n            }\n        }, 530);\n        return new Promise((resolve) => {\n            setTimeout(() => {\n                clearInterval(interval);\n                resolve();\n            }, milliseconds);\n        });\n    }\n}\n\nexport default function (Alpine) {\n    Alpine.directive(\n        'typewriter',\n        (el, { expression, modifiers }, { evaluate }) => {\n            const texts = evaluate(expression);\n\n            const timeModifiers = modifiers.filter((modifier) =>\n                modifier.match(/^\\d+m?s$/),\n            );\n            const latestTimeModifier = timeModifiers.pop();\n            let milliseconds = null;\n            if (latestTimeModifier) {\n                if (latestTimeModifier.endsWith('ms')) {\n                    milliseconds = parseInt(\n                        latestTimeModifier.match(/^(\\d+)/)[1],\n                    );\n                } else {\n                    milliseconds =\n                        parseInt(latestTimeModifier.match(/^(\\d+)s/)[1]) * 1000;\n                }\n            }\n\n            const showCursor = modifiers.includes('cursor');\n\n            new Typewriter(el, texts, milliseconds, showCursor).start().then();\n        },\n    );\n}\n","import Typewriter from '../src/index.js';\n\ndocument.addEventListener('alpine:init', () => {\n    Typewriter(window.Alpine);\n});\n"],"names":["Typewriter","constructor","element","texts","waitTime","showCursor","current","currentText","cursor","start","innerHTML","prepareText","increment","swap","getCursor","getPlaceholder","wait","clear","type","nextText","length","text","append","backspace","slice","substring","milliseconds","interval","setInterval","Promise","resolve","setTimeout","clearInterval","Alpine","directive","el","expression","modifiers","evaluate","timeModifiers","filter","modifier","match","latestTimeModifier","pop","endsWith","parseInt","includes","then","document","addEventListener","window"],"mappings":"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"}